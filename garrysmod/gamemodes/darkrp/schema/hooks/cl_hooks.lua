SCHEMA.displays = {}

SCHEMA:DownloadMaterial("https://i.imgur.com/SCjxSIa.png", "kek1ch/menu/right_steam_icon_v3.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/4Oidfxe.png", "kek1ch/menu/right_vk_icon_v3.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/5BPalCV.png", "kek1ch/menu/exit_menu_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/vqQGoQD.png", "kek1ch/menu/goback_menu_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/GLxj7Sw.png", "kek1ch/menu/play_menu_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/r5O5Y1V.png", "kek1ch/menu/save_menu_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/SQ1JeuV.png", "kek1ch/menu/settings_menu_icon.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/CuE9le1.png", "daui/info_warning.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/jWZzEHj.png", "kek1ch/icons/army_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/CZDX5WQ.png", "kek1ch/icons/bandit_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/gNGTrFh.png", "kek1ch/icons/clearsky_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/H0B1tsx.png", "kek1ch/icons/duty_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/e2NV7Er.png", "kek1ch/icons/freedom_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/CO3MeNA.png", "kek1ch/icons/loner_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/zZM9l6j.png", "kek1ch/icons/merc_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/mOPqf2Q.png", "kek1ch/icons/monolit_info_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/3jVwGtS.png", "kek1ch/icons/scientitst_info_icon.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/cTGeISh.png", "daui/locked_button.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/F4YtdLD.png", "daui/armor_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/eVnZeoO.png", "daui/blooding_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/LWoaQ94.png", "daui/food_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/TnRSMyC.png", "daui/gun_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/poE9taD.png", "daui/helmet_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/ardfBav.png", "daui/hp_icon_v3.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/uuw5Vuj.png", "daui/jajda_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/f0t8St7.png", "daui/lock_icon_v3.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/N2mr5BG.png", "daui/drop_2.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/q7V9jY2.png", "daui/rad_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/hdUfGTA.png", "daui/rad_icon_v6.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/FgjisKn.png", "daui/ui_ani_cursor_01.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/5kca1bH.png", "daui/sleep_icon_v5.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/rE4BqqR.png", "daui/weight_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/RF8oF8D.png", "daui/stamina_icon.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/Ewp6Sr6.png", "daui/sleep_1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/EvzgRSr.png", "daui/psy5_v3.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/P3WCtnM.png", "lgh/circle_gradient.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/cZpMS1y.png", "daui/scrbr.png")

-------------------
--Основное
-------------------
SCHEMA:DownloadMaterial("https://i.imgur.com/yEa4YHP.png", "nsrp/krovyaka.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/828LmHI.png", "kek1ch/overlay/helm_battle1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/jtb8DSC.png", "kek1ch/overlay/helm_exo1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/HoBXWZ9.png", "kek1ch/overlay/helm_hardhat1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/oZuLJjU.png", "kek1ch/overlay/helm_protective1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/dWBFLmA.png", "kek1ch/overlay/helm_respirator1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/nTFBYkj.png", "kek1ch/overlay/helm_scientific1.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/XnqBKRC.png", "kek1ch/overlay/helm_tactic1.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/tyIn9wk.png", "daui/modernhud_v3.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/YE9gBXq.png", "daui/LensDB.png")

SCHEMA:DownloadMaterial("https://i.imgur.com/3ECZsGX.png", "interface/bandit_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/PikA5iM.png", "interface/bandit_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/YlWJNnm.png", "interface/clearsky_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/vcilBI2.png", "interface/clearsky_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/kejgmAs.png", "interface/dolg_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/uFYsNVj.png", "interface/dolg_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/G56RtI7.png", "interface/freedom_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/y4zoQDD.png", "interface/freedom_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/7jmZTY0.png", "interface/greh_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/YGvFGrj.png", "interface/greh_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/XCYygWy.png", "interface/lastday_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/EM8p1RX.png", "interface/lastday_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/BxOhCtL.png", "interface/lon_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/fs8oNKJ.png", "interface/lon_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/LDW6S8h.png", "interface/merc_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/yzSkeVm.png", "interface/merc_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/GBpNJ6D.png", "interface/merchants_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/LItonOM.png", "interface/merchants_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/UInKGg6.png", "interface/military_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/029en3U.png", "interface/military_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/JYIKZLK.png", "interface/monolit_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/lQNcmRj.png", "interface/monolit_true.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/1AsoV3L.png", "interface/scientist_nil.png")
SCHEMA:DownloadMaterial("https://i.imgur.com/9nVPN1u.png", "interface/scientist_true.png")

local ArmorOverlayNormal = {
	["bandit_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["dolg_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["freedom_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["lastday_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["merc_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["monolit_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["nato_exo"] = "kek1ch/overlay/helm_hardhat1.png",
	["stalker_exo"] = "kek1ch/overlay/helm_hardhat1.png",

	["dolg_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["freedom_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["lastday_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["merc_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["monolit_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["nato_seva"] = "kek1ch/overlay/helm_scientific1.png",
	["stalker_seva"] = "kek1ch/overlay/helm_scientific1.png",

	["stalker_normal"] = "kek1ch/overlay/helm_tactic1.png",
	["military_bulat"] = "kek1ch/overlay/helm_tactic1.png",
	["military_berill"] = "kek1ch/overlay/helm_battle1.png",
	["military_skat"] = "kek1ch/overlay/helm_hardhat1.png",
	["merc_normal"] = "kek1ch/overlay/helm_respirator1.png",
	["freedom_normal"] = "kek1ch/overlay/helm_protective1.png",
	["dolg_normal"] = "kek1ch/overlay/helm_protective1.png",

	["clearsky_normal"] = "kek1ch/overlay/helm_protective1.png",
	["clearsky_hight"] = "kek1ch/overlay/helm_protective1.png",
}

local MutantTable = {
	["models/hdmodels/ssk/new_izlom_spen.mdl"] = "food_ruchkasamodrochka10",
	["models/hdmodels/ssk/new_zombi_spen.mdl"] = "food_ruchkasamodrochka2",
	["models/hdmodels/ssk/new_tush_spen.mdl"] = "food_ruchkasamodrochka5",
	["models/hdmodels/ssk/new_snork_spen.mdl"] = "food_ruchkasamodrochka5",
	["models/hdmodels/ssk/new_psydog_spen.mdl"] = "fooddrop2",
	["models/hdmodels/ssk/new_krovo_spen.mdl"] = "fooddrop3",
	["models/hdmodels/ssk/new_plot_spen.mdl"] = "fooddrop6",
	["models/hdmodels/ssk/new_dog_spen.mdl"] = "fooddrop5",
	["models/hdmodels/ssk/new_boar_spen.mdl"] = "fooddrop1",
	["models/hdmodels/ssk/new_chimer_spen.mdl"] = "ruchkasamodrochka11",
}

function SCHEMA:HUDPaint()
	if IsValid(LocalPlayer()) and LocalPlayer():getChar() then
		local items = LocalPlayer():getChar():getInv():getItems()

		for k,v in pairs(items) do
			if (v.category == "Броня") and (v:getData("equip") == true) then
				if ArmorOverlayNormal[v.uniqueID] then
					surface.SetMaterial(Material(ArmorOverlayNormal[v.uniqueID], "noclamp" ))
					surface.SetDrawColor(255, 255, 255, 255)
					surface.DrawTexturedRect(0, 0, ScrW(), ScrH())
				end
			end
		end
	
		local Hit = LocalPlayer():GetEyeTraceNoCursor()
		local entity = Hit.Entity
		if IsValid(entity) then
			local dist = LocalPlayer():GetPos():Distance(entity:GetPos())

			if (entity:GetClass() == "nut_item" or entity:GetClass() == "nut_money") and (dist < 100) then
				surface.SetDrawColor(15, 15, 15, 200)
				surface.DrawRect(ScrW() * 0.434, ScrH() * 0.8, ScrW() * 0.13, ScrH() * 0.036)

				surface.SetDrawColor(Color( 0, 0, 0, 200))
				surface.DrawOutlinedRect(ScrW() * 0.434, ScrH() * 0.8, ScrW() * 0.13, ScrH() * 0.036)

				draw.DrawText("Поднять предмет (У)", "Roh15", ScrW() * 0.5, ScrH() * 0.805, Color(255, 255, 255, 210), TEXT_ALIGN_CENTER)
			elseif (entity:GetClass() == "nut_vendor" or entity:GetClass() == "nut_talker") and (dist < 100) then
				surface.SetDrawColor(15, 15, 15, 200)
				surface.DrawRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				surface.SetDrawColor(Color( 0, 0, 0, 200))
				surface.DrawOutlinedRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				draw.DrawText("Говорить (У)", "Roh15", ScrW() * 0.5, ScrH() * 0.805, Color(255, 255, 255, 210), TEXT_ALIGN_CENTER)
			elseif (entity:GetClass() == "prop_ragdoll") and (dist < 100) and (MutantTable[entity:GetModel()]) then
				surface.SetDrawColor(15, 15, 15, 200)
				surface.DrawRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				surface.SetDrawColor(Color( 0, 0, 0, 200))
				surface.DrawOutlinedRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				draw.DrawText("Разделать (У)", "Roh15", ScrW() * 0.5, ScrH() * 0.805, Color(255, 255, 255, 210), TEXT_ALIGN_CENTER)
			elseif (entity:GetClass() == "nut_metal_entbox" or entity:GetClass() == "nut_wood_entbox") and (dist < 100) then
				surface.SetDrawColor(15, 15, 15, 200)
				surface.DrawRect(ScrW() * 0.434, ScrH() * 0.8, ScrW() * 0.13, ScrH() * 0.036)

				surface.SetDrawColor(Color( 0, 0, 0, 200))
				surface.DrawOutlinedRect(ScrW() * 0.434, ScrH() * 0.8, ScrW() * 0.13, ScrH() * 0.036)

				draw.DrawText("Возможно разбить", "Roh15", ScrW() * 0.5, ScrH() * 0.805, Color(255, 255, 255, 210), TEXT_ALIGN_CENTER)
			elseif (entity:GetClass() == "nut_box") and (dist < 100) then
				surface.SetDrawColor(15, 15, 15, 200)
				surface.DrawRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				surface.SetDrawColor(Color( 0, 0, 0, 200))
				surface.DrawOutlinedRect(ScrW() * 0.445, ScrH() * 0.8, ScrW() * 0.11, ScrH() * 0.036)

				draw.DrawText("Обыскать (У)", "Roh15", ScrW() * 0.5, ScrH() * 0.805, Color(255, 255, 255, 210), TEXT_ALIGN_CENTER)
			end
		end
	end

	--[[if #player.GetAll() < 5 then
		draw.DrawText( "На сервере НонРП тайм", "Roh20", ScrW() * 0.5, ScrH() * 0.25, Color( 255, 255, 255, 255 ), TEXT_ALIGN_CENTER )
		draw.DrawText( #player.GetAll().. "/".. "5".. " Игроков на сервере", "Roh20", ScrW() * 0.5, ScrH() * 0.275, Color( 255, 255, 255, 255 ), TEXT_ALIGN_CENTER )
	end]]
end

function SCHEMA:Tick()
	if IsValid(LocalPlayer()) and (LocalPlayer():getChar()) then

		-------------------------------------------
 		--Тяжелое дыхание при назком кол-во хп
 		-------------------------------------------
		if (LocalPlayer():Health() > 0 and LocalPlayer():Health() <= 20) then
			if (!LocalPlayer().TimeHPSound or LocalPlayer().TimeHPSound < CurTime()) then
				surface.PlaySound("lowhp/health_"..math.random(1,10)..".ogg")
				LocalPlayer().TimeHPSound = CurTime() + 3
			end
		end

		-------------------------------------------
 		--Дыхание в противогазе
 		-------------------------------------------
		if (LocalPlayer():getChar():getInv():hasItem(ArmorTables) and (LocalPlayer():getChar():getInv():hasItem(ArmorTables):getData("equip") == true) and v:Health() > 0) then
			if (!LocalPlayer().TimeSoundArmor or LocalPlayer().TimeSoundArmor < CurTime()) then
				surface.PlaySound("hardbass/dobi4iklox_"..math.random(1,6)..".ogg")
				LocalPlayer().TimeSoundArmor = CurTime() + 3
			end 
		end

	end
end

local color = {}
--if (game.GetMap() == "rp_zaton_warfare_kek1ch_v1") then
	color["$pp_colour_addr"] = 0.06
	color["$pp_colour_addg"] = 0
	color["$pp_colour_addb"] = 0.02
	color["$pp_colour_brightness"] = -0.03
	color["$pp_colour_contrast"] = 1
	color["$pp_colour_colour"] = 0.8
	color["$pp_colour_mulr"] = 0
	color["$pp_colour_mulg"] = 0
	color["$pp_colour_mulb"] = 0
--end

function SCHEMA:RenderScreenspaceEffects()
	DrawColorModify(color)
	if (LocalPlayer():getNetVar("drunk") == true) then
        DrawMotionBlur(0.1, 0.7, 0.01)
        --DrawBloom( 0.4, 1.3, 9.5, 9.5, 3, 1.3, 1, 1, 1 )
    end
end

hook.Add("CanDrawAmmoHUD", "DisableLeAmmoHUD", function()
	return false
end)

hook.Add( "OnEntityCreated", "R_Optimisation.OnEntityCreated", function(ply)
    if ply != LocalPlayer() then return end
    RunConsoleCommand("rope_smooth", "0")
    RunConsoleCommand("Rope_wind_dist", "0")
    RunConsoleCommand("Rope_shake", "0")
    RunConsoleCommand("violence_ablood", "1")
    RunConsoleCommand("mat_queue_mode", "-1")
    RunConsoleCommand("cl_threaded_bone_setup", "1")
    RunConsoleCommand("gmod_mcore_test", "1")
    RunConsoleCommand("cl_threaded_client_leaf_system", "0") 
    RunConsoleCommand("r_queued_ropes", "1")
    RunConsoleCommand("r_threaded_client_shadow_manager", "1") 
    RunConsoleCommand("r_fastzreject", "-1")
    RunConsoleCommand("Cl_ejectbrass", "0")
    RunConsoleCommand("Muzzleflash_light", "0")
    RunConsoleCommand("cl_wpn_sway_interp", "0")
    RunConsoleCommand("in_usekeyboardsampletime", "0")
    --RunConsoleCommand("r_3dsky", "0")
end)

surface.CreateFont( "Roh_Low", {
	font = "Courier",
	extended = false,
	size = ScreenScale(5), --14
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = false,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Roh14", {
	font = "Courier",
	extended = false,
	size = ScreenScale(6), --14
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Roh10", {
	font = "Courier",
	extended = false,
	size = ScreenScale(7), --17
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Dma6", {
	font = "Courier",
	extended = false,
	size = ScreenScale(6),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Dma13", {
	font = "Courier",
	extended = false,
	size = ScreenScale(13),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Dma5", {
	font = "Courier",
	extended = false,
	size = ScreenScale(5),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Dma4", {
	font = "Courier",
	extended = false,
	size = ScreenScale(4),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Roh20", {
	font = "Courier",
	extended = false,
	size = ScreenScale(9), --21
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = false,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Roh25", {
	font = "Courier",
	extended = false,
	size = ScreenScale(11),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = false,
	additive = false,
	outline = false,
} )

surface.CreateFont( "Test", {
	font = "FranklinGothicHeavyRegular",
	extended = false,
	size = ScreenScale(12),
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = true,
} )

surface.CreateFont( "Roh15", {
	font = "Courier",
	extended = false,
	size = ScreenScale(8), --21
	weight = 500,
	blursize = 0,
	scanlines = 0,
	antialias = true,
	underline = false,
	italic = false,
	strikeout = false,
	symbol = false,
	rotary = false,
	shadow = true,
	additive = false,
	outline = false,
} )